# Afilmory - ç°ä»£åŒ–ç…§ç‰‡é›†é™æ€ç«™ç‚¹ç”Ÿæˆå™¨

<p align="center">
  <img src="https://github.com/Afilmory/assets/blob/main/afilmory-readme.webp?raw=true" alt="Afilmory" width="100%" />
</p>

Afilmory (/É™ËˆfÉªlmÉ™ri/, "uh-FIL-muh-ree") æ˜¯ä¸€ä¸ªä¸“ä¸ºæ‘„å½±çˆ±å¥½è€…è®¾è®¡çš„é™æ€ç«™ç‚¹ç”Ÿæˆå™¨ï¼Œç±»ä¼¼äº Hexo/Hugoï¼Œä½†ä¸“æ³¨äºç…§ç‰‡å±•ç¤ºã€‚å®ƒç»“åˆäº†è‡ªåŠ¨ç…§ç‰‡å¤„ç†ã€ç°ä»£åŒ–å‰ç«¯æŠ€æœ¯å’Œç®€å•çš„éƒ¨ç½²æµç¨‹ï¼Œè®©ä½ è½»æ¾åˆ›å»ºå±äºè‡ªå·±çš„ç…§ç‰‡é›†ç½‘ç«™ã€‚

**âœ¨ åœ¨çº¿æ¼”ç¤º:**
- https://afilmory.innei.in
- https://gallery.mxte.cc
- https://photography.pseudoyu.com
- https://afilmory.magren.cc

## ğŸŒŸ ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ–¼ï¸ **é«˜æ€§èƒ½ WebGL å›¾ç‰‡æ¸²æŸ“å™¨** - è‡ªå®šä¹‰ WebGL ç»„ä»¶ï¼Œæµç•…çš„ç¼©æ”¾å’Œå¹³ç§»
- ğŸ“± **å“åº”å¼ç€‘å¸ƒæµå¸ƒå±€** - åŸºäº Masonicï¼Œé€‚é…ä¸åŒå±å¹•å°ºå¯¸
- ğŸ¨ **ç°ä»£ UI è®¾è®¡** - Glassmorphic è®¾è®¡ç³»ç»Ÿï¼ŒTailwind CSS 4
- âš¡ **å¢é‡æ„å»º** - æ™ºèƒ½å˜æ›´æ£€æµ‹ï¼Œåªå¤„ç†æ–°å¢æˆ–ä¿®æ”¹çš„ç…§ç‰‡
- ğŸŒ **å›½é™…åŒ–** - å†…ç½®å¤šè¯­è¨€æ”¯æŒ
- ğŸ”— **OpenGraph** - ç¤¾äº¤åª’ä½“åˆ†äº«é¢„è§ˆ

### å›¾ç‰‡å¤„ç†

- ğŸ”„ **HEIC/HEIF æ”¯æŒ** - è‡ªåŠ¨è½¬æ¢ Apple è®¾å¤‡ç…§ç‰‡æ ¼å¼
- ğŸ“· **TIFF æ”¯æŒ** - è‡ªåŠ¨è½¬æ¢ä¸“ä¸šæ‘„å½±æ ¼å¼
- ğŸ–¼ï¸ **æ™ºèƒ½ç¼©ç•¥å›¾ç”Ÿæˆ** - å¤šå°ºå¯¸ç¼©ç•¥å›¾ï¼Œä¼˜åŒ–åŠ è½½é€Ÿåº¦
- ğŸ“Š **EXIF ä¿¡æ¯å±•ç¤º** - å®Œæ•´çš„æ‹æ‘„å‚æ•°ï¼šç›¸æœºã€ç„¦è·ã€å…‰åœˆç­‰
- ğŸŒˆ **Blurhash å ä½å›¾** - ä¼˜é›…çš„å›¾ç‰‡åŠ è½½ä½“éªŒ
- ğŸ“± **Live Photo æ”¯æŒ** - æ£€æµ‹å’Œå±•ç¤º iPhone åŠ¨æ€ç…§ç‰‡
- â˜€ï¸ **HDR å›¾ç‰‡æ”¯æŒ** - å±•ç¤º HDR å›¾ç‰‡

### é«˜çº§åŠŸèƒ½

- ğŸ›ï¸ **å¯Œå£«èƒ¶ç‰‡æ¨¡æ‹Ÿ** - è¯»å–å¹¶å±•ç¤ºå¯Œå£«ç›¸æœºèƒ¶ç‰‡æ¨¡æ‹Ÿè®¾ç½®
- ğŸ” **å…¨å±æŸ¥çœ‹å™¨** - æ”¯æŒæ‰‹åŠ¿çš„å›¾ç‰‡æŸ¥çœ‹å™¨
- ğŸ·ï¸ **æ–‡ä»¶ç³»ç»Ÿæ ‡ç­¾** - åŸºäºæ–‡ä»¶ç³»ç»Ÿè‡ªåŠ¨ç”Ÿæˆæ ‡ç­¾
- âš¡ **å¹¶å‘å¤„ç†** - å¤šè¿›ç¨‹/å¤šçº¿ç¨‹å¹¶å‘å¤„ç†æ”¯æŒ
- ğŸ—‚ï¸ **å¤šå­˜å‚¨æ”¯æŒ** - S3ã€GitHub å’Œæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ
- ğŸ“· **å›¾ç‰‡åˆ†äº«** - åˆ†äº«åˆ°ç¤¾äº¤åª’ä½“æˆ–åµŒå…¥ç½‘ç«™
- ğŸ—ºï¸ **äº¤äº’å¼åœ°å›¾** - ä½¿ç”¨ MapLibre å±•ç¤ºå¸¦ GPS åæ ‡çš„ç…§ç‰‡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ç½®è¦æ±‚

- Node.js 18+
- pnpm 10+

### å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/Afilmory/Afilmory.git
cd Afilmory

# å®‰è£…ä¾èµ–
pnpm install
```

### é…ç½®

1. **åˆ›å»º photos ç›®å½•å¹¶æ·»åŠ ç…§ç‰‡**

```bash
mkdir photos
# å°†ä½ çš„ç…§ç‰‡å¤åˆ¶åˆ° photos ç›®å½•
cp ~/Pictures/*.jpg photos/
```

2. **é…ç½®ç«™ç‚¹ä¿¡æ¯** (å¯é€‰)

```bash
cp config.example.json config.json
```

ç¼–è¾‘ `config.json`:

```json
{
  "name": "æˆ‘çš„ç…§ç‰‡é›†",
  "title": "My Afilmory",
  "description": "è®°å½•ç”Ÿæ´»ä¸­çš„ç¾å¥½ç¬é—´",
  "url": "https://your-site.vercel.app",
  "author": {
    "name": "Your Name",
    "url": "https://your-website.com"
  }
}
```

### æ„å»ºå’Œé¢„è§ˆ

```bash
# å®Œæ•´æ„å»ºï¼ˆå¤„ç†ç…§ç‰‡ + æ„å»ºå‰ç«¯ï¼‰
pnpm build

# æœ¬åœ°é¢„è§ˆ
pnpm preview
```

æ‰“å¼€ http://localhost:4173 é¢„è§ˆä½ çš„ç…§ç‰‡ç«™ç‚¹ï¼

## ğŸ“¦ éƒ¨ç½²

### éƒ¨ç½²åˆ° Vercelï¼ˆæ¨èï¼‰

#### æ–¹å¼ä¸€ï¼šCLI éƒ¨ç½²

```bash
# å®‰è£… Vercel CLI
npm i -g vercel

# éƒ¨ç½²
vercel --prod
```

#### æ–¹å¼äºŒï¼šGitHub è‡ªåŠ¨éƒ¨ç½²

1. å°†é¡¹ç›®æ¨é€åˆ° GitHub
2. åœ¨ [vercel.com](https://vercel.com) å¯¼å…¥é¡¹ç›®
3. Vercel ä¼šè‡ªåŠ¨æ£€æµ‹é…ç½®å¹¶éƒ¨ç½²
4. æ¯æ¬¡æ¨é€åˆ° `main` åˆ†æ”¯è‡ªåŠ¨é‡æ–°éƒ¨ç½²

### å…¶ä»–å¹³å°

| å¹³å° | Build Command | Output Directory |
|------|--------------|-----------------|
| **Netlify** | `sh scripts/build-static.sh` | `apps/web/dist` |
| **Cloudflare Pages** | `sh scripts/build-static.sh` | `apps/web/dist` |
| **GitHub Pages** | `sh scripts/build-static.sh` | `apps/web/dist` |

è¯¦è§ [éƒ¨ç½²æŒ‡å—](./DEPLOY_STATIC.md)

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### å‰ç«¯æŠ€æœ¯æ ˆ

- **React 19** - æœ€æ–°ç‰ˆæœ¬ï¼ŒåŒ…å« React Compiler
- **TypeScript** - å®Œæ•´çš„ç±»å‹å®‰å…¨
- **Vite 7** - ç°ä»£æ„å»ºå·¥å…·
- **Tailwind CSS 4** - åŸå­åŒ– CSS
- **Radix UI** - æ— éšœç¢ç»„ä»¶åº“
- **Jotai** - çŠ¶æ€ç®¡ç†
- **TanStack Query** - æ•°æ®è·å–å’Œç¼“å­˜
- **React Router 7** - è·¯ç”±ç®¡ç†
- **i18next** - å›½é™…åŒ–

### æ„å»ºç³»ç»Ÿ

- **Node.js** - æœåŠ¡ç«¯è¿è¡Œæ—¶
- **Sharp** - é«˜æ€§èƒ½å›¾ç‰‡å¤„ç†
- **AWS SDK** - S3 å­˜å‚¨æ“ä½œï¼ˆå¯é€‰ï¼‰
- **Worker Threads/Cluster** - å¹¶å‘å¤„ç†
- **EXIF-Reader** - EXIF æ•°æ®æå–

### å­˜å‚¨æ¶æ„

é‡‡ç”¨é€‚é…å™¨æ¨¡å¼ï¼Œæ”¯æŒå¤šç§å­˜å‚¨åç«¯ï¼š

- **æœ¬åœ°æ–‡ä»¶ç³»ç»Ÿ** - é»˜è®¤ï¼Œç…§ç‰‡æ”¾åœ¨ `photos/` ç›®å½•
- **S3 å…¼å®¹å­˜å‚¨** - AWS S3, MinIO, é˜¿é‡Œäº‘ OSS ç­‰
- **GitHub å­˜å‚¨** - ä½¿ç”¨ GitHub ä»“åº“ä½œä¸ºå›¾ç‰‡å­˜å‚¨

## ğŸ“ é¡¹ç›®ç»“æ„

```
afilmory/
â”œâ”€â”€ photos/                    # ğŸ“¸ ç…§ç‰‡æºæ–‡ä»¶
â”œâ”€â”€ apps/
â”‚   â””â”€â”€ web/                   # ğŸ¨ å‰ç«¯ SPA åº”ç”¨
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ builder/               # ğŸ”¨ ç…§ç‰‡å¤„ç†å·¥å…·
â”‚   â”œâ”€â”€ webgl-viewer/          # ğŸ–¼ï¸ WebGL æŸ¥çœ‹å™¨
â”‚   â”œâ”€â”€ data/                  # ğŸ“Š æ•°æ®å±‚
â”‚   â”œâ”€â”€ ui/                    # ğŸ¨ UI ç»„ä»¶
â”‚   â”œâ”€â”€ hooks/                 # âš“ React Hooks
â”‚   â””â”€â”€ utils/                 # ğŸ”§ å·¥å…·å‡½æ•°
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ build-static.sh        # æ„å»ºè„šæœ¬
â”œâ”€â”€ config.json                # ç«™ç‚¹é…ç½®
â”œâ”€â”€ builder.config.static.ts   # æ„å»ºé…ç½®
â””â”€â”€ vercel.json                # éƒ¨ç½²é…ç½®
```

## âš™ï¸ é…ç½®é€‰é¡¹

### ç«™ç‚¹é…ç½® (`config.json`)

```json
{
  "name": "ç«™ç‚¹åç§°",
  "title": "ç«™ç‚¹æ ‡é¢˜",
  "description": "ç«™ç‚¹æè¿°",
  "url": "https://your-site.com",
  "accentColor": "#007bff",
  "author": {
    "name": "ä½œè€…å",
    "url": "https://author-site.com",
    "avatar": "https://avatar-url.jpg"
  },
  "social": {
    "github": "username",
    "twitter": "handle",
    "rss": true
  },
  "map": ["maplibre"],
  "mapStyle": "https://map-style-url.json"
}
```

### æ„å»ºé…ç½® (`builder.config.static.ts`)

```typescript
export default defineBuilderConfig(() => ({
  storage: {
    provider: 'local',      // å­˜å‚¨æä¾›å•†
    basePath: './photos',   // ç…§ç‰‡ç›®å½•
    baseUrl: '/photos',     // è®¿é—®è·¯å¾„
  },
  system: {
    processing: {
      defaultConcurrency: 10,         // å¹¶å‘æ•°
      enableLivePhotoDetection: true, // Live Photo
    },
  },
}))
```

### ä½¿ç”¨ S3 å­˜å‚¨

ç¼–è¾‘ `builder.config.static.ts`ï¼Œä¿®æ”¹ storage é…ç½®ï¼š

```typescript
storage: {
  provider: 's3',
  bucket: 'my-bucket',
  region: 'us-east-1',
  accessKeyId: env.S3_ACCESS_KEY_ID,
  secretAccessKey: env.S3_SECRET_ACCESS_KEY,
  prefix: 'photos/',
  customDomain: 'https://cdn.example.com',
}
```

åˆ›å»º `.env` æ–‡ä»¶ï¼š

```bash
S3_BUCKET_NAME=your-bucket
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=your-key
S3_SECRET_ACCESS_KEY=your-secret
```

## ğŸ“‹ CLI å‘½ä»¤

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆä¸å¤„ç†ç…§ç‰‡ï¼‰
pnpm dev

# å®Œæ•´æ„å»º
pnpm build

# åªå¤„ç†ç…§ç‰‡
pnpm build:manifest

# åªæ„å»ºå‰ç«¯
pnpm build:web

# é¢„è§ˆæ„å»ºç»“æœ
pnpm preview
```

### Manifest æ„å»ºé€‰é¡¹

```bash
# å¼ºåˆ¶é‡æ–°å¤„ç†æ‰€æœ‰ç…§ç‰‡
pnpm build:manifest -- --force

# åªé‡æ–°ç”Ÿæˆç¼©ç•¥å›¾
pnpm build:manifest -- --force-thumbnails

# åªé‡æ–°ç”Ÿæˆ manifest
pnpm build:manifest -- --force-manifest
```

## ğŸ”„ æ›´æ–°ç…§ç‰‡

### æ·»åŠ æ–°ç…§ç‰‡

1. å°†æ–°ç…§ç‰‡æ”¾å…¥ `photos/` ç›®å½•
2. è¿è¡Œ `pnpm build`
3. éƒ¨ç½²æ›´æ–°

å¢é‡æ„å»ºä¼šè‡ªåŠ¨æ£€æµ‹æ–°å¢/ä¿®æ”¹çš„ç…§ç‰‡ï¼Œåªå¤„ç†å˜æ›´éƒ¨åˆ†ã€‚

### æ”¯æŒçš„æ ¼å¼

- JPG / JPEG
- PNG
- HEIC (Apple è®¾å¤‡)
- TIFF
- Live Photos (iPhone)

## ğŸ¨ è‡ªå®šä¹‰

### ä¿®æ”¹ä¸»é¢˜è‰²

ç¼–è¾‘ `config.json` çš„ `accentColor`:

```json
{
  "accentColor": "#ff6b6b"
}
```

### æ·»åŠ åœ°å›¾æ ·å¼

```json
{
  "map": ["maplibre"],
  "mapStyle": "https://your-map-style.json",
  "mapProjection": "globe"
}
```

### å›½é™…åŒ–

è¯­è¨€æ–‡ä»¶ä½äº `apps/web/public/locales/`ã€‚

æ·»åŠ æ–°è¯­è¨€ï¼š
1. åˆ›å»ºè¯­è¨€ç›®å½•ï¼ˆå¦‚ `fr/`ï¼‰
2. å¤åˆ¶å¹¶ç¿»è¯‘ `common.json`
3. åœ¨ `apps/web/src/lib/i18n.ts` æ·»åŠ è¯­è¨€ä»£ç 

## ğŸ“Š æ€§èƒ½

- âš¡ **Lighthouse è¯„åˆ†**: 95+
- ğŸ¯ **é¦–å±åŠ è½½**: < 1s
- ğŸ“¦ **Bundle å¤§å°**: ~250KB (gzipped)
- ğŸ–¼ï¸ **å›¾ç‰‡ä¼˜åŒ–**: WebP + å¤šå°ºå¯¸ç¼©ç•¥å›¾
- ğŸ’¾ **ç¼“å­˜ç­–ç•¥**: é™æ€èµ„æºæ°¸ä¹…ç¼“å­˜

## ğŸ”§ é«˜çº§ç”¨æ³•

### è‡ªå®šä¹‰å­˜å‚¨æä¾›å•†

å®ç° `StorageProvider` æ¥å£ï¼š

```typescript
import { StorageProvider } from '@afilmory/builder'

class MyStorageProvider implements StorageProvider {
  async getFile(key: string): Promise<Buffer | null> {
    // å®ç°æ–‡ä»¶è·å–é€»è¾‘
  }

  async listImages(): Promise<StorageObject[]> {
    // å®ç°å›¾ç‰‡åˆ—è¡¨è·å–é€»è¾‘
  }
}
```

### è‡ªå®šä¹‰å›¾ç‰‡å¤„ç†

åœ¨ `packages/builder` ä¸­æ·»åŠ è‡ªå®šä¹‰å¤„ç†å™¨ã€‚

è¯¦è§ [AGENTS.md](./AGENTS.md)

## ğŸ¤ è´¡çŒ®

æ¬¢è¿è´¡çŒ®ä»£ç ã€æŠ¥å‘Šé—®é¢˜æˆ–æå‡ºå»ºè®®ï¼

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/amazing-feature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add amazing feature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/amazing-feature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

Attribution Network License (ANL) v1.0 Â© 2025 Afilmory Team.

è¯¦è§ [LICENSE](LICENSE)

## ğŸ”— ç›¸å…³é“¾æ¥

- [åœ¨çº¿æ¼”ç¤º](https://afilmory.innei.in)
- [éƒ¨ç½²æŒ‡å—](./DEPLOY_STATIC.md)
- [æ¶æ„æ–‡æ¡£](./AGENTS.md)
- [GitHub Issues](https://github.com/Afilmory/Afilmory/issues)
- [ä½œè€…åšå®¢](https://innei.in)

## ğŸ’ è‡´è°¢

æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨ Afilmory çš„æ‘„å½±çˆ±å¥½è€…ä»¬ï¼

---

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª â­ï¸ Star æ”¯æŒä¸€ä¸‹ï¼
